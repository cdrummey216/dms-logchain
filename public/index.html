<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>dms-logchain</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

  </head>
  <body>
      <div id="consentBox">
        <img src="" alt="Logo">
        <div id="consentContent">
            <header id="consentHeader">
                  dms-cookies
              </header>
            <p>
              We use cookies to monitor for sign of life.
              <br>The cookies are necessary for site to function and are anonymous.
            </p>
            <div class="buttons">
                <button class="consentButton">
                      Accept Cookies
                  </button>
                <button class="rejectButton">
                      Reject
                  </button>
            </div>
        </div>
    </div>
    <main>
        <h1>dms-logchain</h1>
        <h3>dms-logchain-home</h3>
        <ul>/options
            <li><a href="/about.html">what is</a></li>
            <li><a href="/newUid.html">new deadman</a></li>
            <li><a href="/login.html">returning deadman</a></li>
            <li><a href="/history.html">view uid history</a></li>            
            <li><a href="/findEntry.html">find an entry</a></li>
            <li><a href="/newEntry.html">add new entry</a></li>
        </ul>
        <div class="buttons">
          <button onclick="mineEntries()" id="mine">mine entries</button><br />
          <button onclick="lodeUIDs()" id="lode">lode uids</button><br />
          <button onclick="checkin()" id="log">checkin</button><br />
        </div>
        
    </main>
    <h1>dms-watcher</h1>
    
    <iframe src="/latestlog" title="description"></iframe>
    
    <script src="./script.js"></script>
    <script type="text/javascript">
    const consentBox = document.getElementById("consentBox");
    const acceptBtn = document.querySelector(".consentButton");
    const rejectBtn = document.querySelector(".rejectButton");

    acceptBtn.onclick = () => {
        document.cookie = "CookieBy=dms-logchain; max-age=" + 60 * 60 * 24 * 30;
        if (document.cookie) {
            consentBox.classList.add("hide");
        } else {
            alert
                ("Cookie can't be set! Please"+
                  " unblock this site from the cookie"+
                  " setting of your browser.");
        }
    };

    rejectBtn.onclick = () => {
        alert(
            "Cookies rejected. Some functionality may be limited.");
        consentBox.classList.add("hide");
    };

    let checkCookie = document.cookie.indexOf("CookieBy=dms-logchain");
    checkCookie !== -1 ? consentBox.classList.add("hide") : consentBox.classList.remove("hide");
    </script>
  </body>
</html>

