<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>dms-logchain</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <script type="text/javascript" src="/vis-network.min.js"></script>
  </head>
  <body>
    <main>
    <div class="windows">
        <h1>dms-logchain</h1>
        <h3>dms-logchain-strata</h3>
        <h4>dms-logchain-uid: <span id="currentUid"></span></h4>
        <a href="/index.html">home</a><br /><br />
        <i>the strata are any entries that were logged before a given uid</i><br />
        <label class="hide" for="lastUuid">lastUuid:</label>
        <input class="hide" id="lastUuid" type="text" name="lastUuid" value="" />        
        <label class="hide" for="lastLog">lastLog:</label>
        <input class="hide" id="lastLog" type="number" name="lastLog" />
        <button class="hide" id="history">view history</button>
        <div class="windows">
          <div id="graph"></div>
          <div id="selectedNode"></div>
        </div>
        </div>

        <table id="thisTable" class="hide" border="1">
            <thead>
                <tr>
                    <th>lastUuid</th>
                    <th>lastLog</th>
                    <th>status</th>
                    <th>fortune</th>
                    <th>uuid</th>
                    <th>timestamp</th>
                </tr>
            </thead>
            <tbody id="data"></tbody>
        </table>
        <script src="./script.js"></script>
        <script type="text/javascript">
            //setInputValue2();
            setCurrentUid();
            findLogIdx(getCookieValue('lastUuid'));
            const uid = getParam('uid'); 
            document.getElementById("lastUuid").value = uid;
            graphStrata(uid);
            const historyBtn = document.getElementById("history");
            historyBtn.onclick = () => {
              findHistory(document.getElementById("lastUuid").value);
              graphStrata(document.getElementById("lastUuid").value);
          };
        </script>
    </main>
  </body>
</html>
